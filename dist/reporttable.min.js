(function(b){function a(c,a){this.b=b(c);this.options=b.extend(!0,{},this.t,a);this.q()}a.prototype.q=function(){this.reset();this.l=b.h(this.scroll,this);this.m=b.h(this.resize,this);b(window).scroll(this.l);b(window).resize(this.m);this.interval=setInterval(b.h(this.scroll,this),this.options.C);this.G=setInterval(b.h(this.resize,this),this.options.H);b.h(function(){clearInterval(this.interval);clearInterval(this.G);b(window).o("scroll",this.l);b(window).o("resize",this.m);this.a.remove()},this)};
a.prototype.reset=function(){"undefined"!==typeof this.e&&this.e.remove();"undefined"!==typeof this.g&&this.g.remove();this.b.find("thead, tfoot").d("visibility","hidden");this.e=b("<table>").j(this.options.f+"_header").d({position:"relative","z-index":4,"table-layout":"fixed"}).append(this.b.children("thead").r(!0));this.body=this.b.children("tbody");this.g=b("<table>").j(this.options.f+"_footer").d({position:"relative","z-index":3,"margin-top":-this.b.children("tfoot").height(),"table-layout":"fixed"}).append(this.b.children("tfoot").r(!0));
null!=this.options.c&&this.s();this.b.K(this.e);this.b.p(this.g);this.e.find("thead").d("visibility","visible");this.g.find("tfoot").d("visibility","visible");this.refresh()};a.prototype.refresh=function(){this.resize();this.scroll()};a.prototype.scroll=function(){b(window).scrollTop()+b(window).height()>b(document).height()||(this.w(),this.v())};a.prototype.w=function(){var c=b(window).scrollTop()-this.b.offset().top+this.options.B;0>c&&(c=0);this.e.d("top",c)};a.prototype.v=function(){var c="undefined"!==
typeof this.a,a=-(this.b.height()+this.b.offset().top-b(window).height())+b(window).scrollTop()-this.options.A;c&&(a-=this.a.height()-2);if(0<a||0>a+this.b.outerHeight())a=0;this.g.d("top",a);c&&(this.a.d("top",a-this.a.height()-2),this.a.width(this.options.c.width()))};a.prototype.resize=function(){this.F();this.D();this.b.d("margin-top",-this.e.height())};a.prototype.F=function(){var a=this.k(),d=this;this.e.width(this.body.width());this.e.find("tr").i(function(){b(this).find(d.options.u).i(function(d){if(d>=
a.length)return!1;b(this).width(a[d])})});this.a.width(this.options.c.width());this.a.find("."+this.options.f+"_scrollbarInner").width(this.b.width())};a.prototype.D=function(){var a=this.k();this.g.width(this.body.width());this.g.find("tr").i(function(){b(this).find("td").i(function(d){if(d>=a.length)return!1;b(this).width(a[d])})})};a.prototype.s=function(){if(null!=this.options.c&&"undefined"===typeof this.a)if(0<this.options.c.parent().find("."+this.options.f+"_scrollbar").length)this.a=this.options.c.parent().find("."+
this.options.f+"_scrollbar");else{this.a=b("<div>").j(this.options.f+"_scrollbar");this.a.d({position:"relative","overflow-x":"auto","overflow-y":"hidden","z-index":6,width:this.options.c.width()});var a=b("<div>").j(this.options.f+"_scrollbarInner");a.d({width:this.b.width(),height:0});this.options.c.o("scroll",this.n);this.n=b.h(this.I,this);this.options.c.scroll(this.n);a.N("&nbsp;");this.a.scroll(b.h(this.c,this));this.a.append(a);this.options.c.p(this.a)}};a.prototype.c=function(){this.options.c.scrollLeft(this.a.scrollLeft())};
a.prototype.I=function(){this.a.scrollLeft(this.options.c.scrollLeft())};a.prototype.k=function(){var a=[];this.body.find("tr").L(0).find("td").i(function(){a.push(b(this).width())});return a};a.prototype.t={B:0,A:0,f:"reporttable",C:400,H:2E3,u:"th",c:null};b.M.O=function(c){return this.i(function(){b(this).data("reportTable",new a(this,c))})};"function"===typeof define&&define.J&&define(["jquery"],function(){return a})})(jQuery);
