!function(t){var e=function(e,i){this.container=t(e),this.options=t.extend(!0,{},this.defaultOptions,i),this.buildTable()};e.prototype.buildTable=function(){this.reset(),this.refreshFunct=t.proxy(this.scroll,this),this.resizeFunct=t.proxy(this.resize,this),t(window).scroll(this.refreshFunct),t(window).resize(this.resizeFunct);var e,i=this;(e=this.options.scrollEventObject)?e.scroll(function(){i.scroll()}):this.interval=setInterval(t.proxy(this.scroll,this),this.options.pollInterval),this.resizeInterval=setInterval(t.proxy(this.resize,this),this.options.resizePollInterval),this.container.bind("remove",t.proxy(function(){clearInterval(this.interval),clearInterval(this.resizeInterval),t(window).unbind("scroll",this.refreshFunct),t(window).unbind("resize",this.resizeFunct),this.scroller.remove()},this));var i=this;this.frozenIndices=[],this.container.on("colFreezeToggle",function(e,o){var r=i.getOuterWidthsFromFirstRow(),n=i.getHeightFromHeader(),s=i.getHeightFromFirstRow(),h=i.frozenIndices.indexOf(o);-1==h?i.frozenIndices.push(o):i.frozenIndices.splice(h,1),i.parentContainer.find("tr").each(function(){t(this).height(s);var e=t(this).children().eq(o);e.toggle(),e.find(".frozen-column").removeClass("invisible"),e.text().length||e.html("&nbsp;")}),i.parentContainer.find("tr").height(n),i.parentContainer.find("#frozenContainer tr").each(function(){t(this).children("td,th").eq(o).width(r[o])}),i.accommodateFrozen(t("#frozenCols")),i.resize()}),this.frozenCols.on("rowAdded",function(e,o){var r=t(o.row),n=r.clone();n.children().each(function(e){-1==i.frozenIndices.indexOf(e)&&t(this).hide()}),r.children().each(function(e){-1!=i.frozenIndices.indexOf(e)&&t(this).hide()}),n.height(r.height()),i.frozenCols.find("tbody").append(n)})},e.prototype.accommodateFrozen=function(e){selectedRow=t(e).children().children().first(),this.regularTable.css({left:this.parentContainer.find("#frozenContainer").width()})},e.prototype.reset=function(){void 0!==this.header&&this.header.remove(),void 0!==this.footer&&this.footer.remove(),this.parentContainer=this.container.parent(),this.container.css({position:"relative"}),this.header=t("<table>").addClass(this.options.cssPrefix+"_header").css({"table-layout":"fixed"}).append(this.container.children("thead").clone(!0)),this.body=this.container.children("tbody"),this.footer=t("<table>").addClass(this.options.cssPrefix+"_footer").css({position:"relative","margin-top":-this.container.children("tfoot").height()-4,"table-layout":"fixed"}).append(this.container.children("tfoot").clone(!0)),this.frozenCols=this.container.clone().attr("id","frozenCols"),this.frozenCols.find("td").hide(),null!=this.options.scrollContainer&&this.createFooterScrollbar(),this.frozenTable=t("<div>").addClass("inline-block").attr("id","frozenContainer"),this.regularTable=t("<div>").addClass("inline-block").attr("id","regularContainer"),this.frozenHeader=this.header.clone(!0).attr("id","frozenHeader"),this.frozenHeader.find(".freeze-column").trigger("freezeToggle"),this.frozenHeader.find("td,th").hide(),this.frozenTable.append(this.frozenHeader),this.frozenTable.append(this.frozenCols),this.frozenTable.find("th").hide(),this.frozenFooter=this.footer.clone().attr("id","frozenFooter"),this.frozenFooter.find("td").hide(),this.frozenTable.append(this.frozenFooter),this.container.before(this.frozenTable),this.container.before(this.regularTable),this.regularTable.append(this.container),this.container.before(this.header),this.container.after(this.footer),this.frozenTable.find("table").eq(1).find("thead, tfoot").css("visibility","hidden"),this.regularTable.find("table").eq(1).find("thead, tfoot").css("visibility","hidden"),this.refresh()},e.prototype.refresh=function(){this.resize(),this.scroll()},e.prototype.scroll=function(){t(window).scrollTop()+t(window).height()>t(document).height()||(this.moveHeader(),this.moveFooter())},e.prototype.moveHeader=function(){var e=t("#regularContainer").find(".reporttable_header"),i=this.container.offset().top;i=i<0?Math.abs(i)+this.options.offsetHeaderHeight:0,e.css("top",i)},e.prototype.moveFooter=function(){var e=void 0!==this.scroller,i=this.container.height()+this.container.offset().top,o=-(i-t(window).height())+t(window).scrollTop()-this.options.offsetFooterHeight;e&&(o-=this.scroller.height()-2),(o>0||o+this.container.outerHeight()<0)&&(o=0),this.footer.css("top",o+4),this.frozenFooter.css("top",o+4),e&&(this.scroller.css("top",o-this.scroller.height()-2),this.scroller.width(this.options.scrollContainer.width()))},e.prototype.resize=function(){this.resizeHeader(),this.resizeFooter()},e.prototype.resizeHeader=function(){var e=this.getOuterWidthsFromFirstRow();this.header.width(this.body.width()),this.header.find("tr").each(function(i){t(this).children().each(function(i){if(i>=e.length)return!1;t(this).css("min-width",e[i]),t(this).css("max-width",e[i])})}),this.scroller.width(this.options.scrollContainer.width()),this.scroller.find("."+this.options.cssPrefix+"_scrollbarInner").width(this.container.width())},e.prototype.resizeFooter=function(){var e=this.getWidthsFromFirstRow();this.footer.width(this.body.width()),this.footer.find("tr").each(function(i){t(this).find("td").each(function(i){if(i>=e.length)return!1;t(this).width(e[i])})})},e.prototype.createFooterScrollbar=function(){if(null!=this.options.scrollContainer&&void 0===this.scroller){if(this.options.scrollContainer.parent().find("."+this.options.cssPrefix+"_scrollbar").length>0)return void(this.scroller=this.options.scrollContainer.parent().find("."+this.options.cssPrefix+"_scrollbar"));this.scroller=t("<div>").addClass(this.options.cssPrefix+"_scrollbar"),this.scroller.css({position:"relative","overflow-x":"auto","overflow-y":"hidden","z-index":6,width:this.options.scrollContainer.width()});var e=t("<div>").addClass(this.options.cssPrefix+"_scrollbarInner");e.css({width:this.container.width(),height:0}),this.options.scrollContainer.unbind("scroll",this.scrollContainerScrollEvent),this.scrollContainerScrollEvent=t.proxy(this.scrollScrollbar,this),this.options.scrollContainer.scroll(this.scrollContainerScrollEvent),e.html("&nbsp;"),this.scroller.scroll(t.proxy(this.scrollContainer,this)),this.scroller.append(e),this.options.scrollContainer.after(this.scroller)}},e.prototype.scrollContainer=function(t){this.options.scrollContainer.scrollLeft(this.scroller.scrollLeft())},e.prototype.scrollScrollbar=function(t){this.scroller.scrollLeft(this.options.scrollContainer.scrollLeft())},e.prototype.getWidthsFromFirstRow=function(){var e=this.body.find("tr").eq(0),i=[];return e.find("td").each(function(e){i.push(t(this).width())}),i},e.prototype.getOuterWidthsFromFirstRow=function(){var e=this.body.find("tr").eq(0),i=[];return e.find("td").each(function(e){i.push(t(this).outerWidth())}),i},e.prototype.getHeightFromHeader=function(){var e=0;return this.header.find("tr").each(function(i){var o=t(this).height();e<o&&(e=o)}),e},e.prototype.getHeightFromFirstRow=function(){var e=this.body.find("tr").eq(0);return t(e).height()},e.prototype.defaultOptions={offsetHeaderHeight:0,offsetFooterHeight:0,cssPrefix:"reporttable",pollInterval:400,resizePollInterval:2e3,headerCell:"th",scrollContainer:null,scrollEventObject:null},t.fn.reportTable=function(i){return this.each(function(){t(this).data("reportTable",new e(this,i))})},"function"==typeof define&&define.amd&&define(["jquery"],function(t){"use strict";return e})}(jQuery);
//# sourceMappingURL=reporttable.map